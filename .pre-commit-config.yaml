---
minimum_pre_commit_version: 4.5.1
repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
    -   id: check-case-conflict
    -   id: check-executables-have-shebangs
    -   id: check-yaml
    -   id: end-of-file-fixer
    -   id: trailing-whitespace
    -   id: no-commit-to-branch
- repo: local
  hooks:
    - id: terraform-validate-infra-analysis-node
      name: terraform init + validate (infra/analysis-node)
      entry: bash -euo pipefail -c 'cd infra/analysis-node && terraform init -backend=false && terraform validate'
      language: system
      pass_filenames: false
      files: ^infra/analysis-node/.*\.tf$
      stages: [pre-push]
- repo: local
  hooks:
    - id: terraform-fmt-infra-analysis-node
      name: terraform init + fmt (infra/analysis-node)
      entry: bash -euo pipefail -c 'terraform fmt -check'
      language: system
      pass_filenames: false
      files: ^infra/analysis-node/.*\.tf$
      stages: [pre-push]
- repo: local
  hooks:
    - id: shellcheck
      name: shellcheck (local)
      entry: shellcheck
      language: system
      files: \.(sh|bash)$
      stages: [pre-push]
-   repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
    - id: detect-secrets
      args: ['--baseline', '.secrets.baseline']
      exclude: package.lock.json
- repo: https://github.com/ansible/ansible-lint.git
  rev: v25.12.2
  hooks:
    - id: ansible-lint
      files: \.(yaml|yml)$
      name: Ansible Lint
      verbose: true
      args: [-p, infra/ansible/]
