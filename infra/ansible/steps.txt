# --- nats role ---

Copy over nats credentials and config files
start nats server from docker

# --- Setting role ---

# TODO

# --- Ingest Role (require physical) ---
# apt install -y bluez
# systemctl enable --now bluetooth

# bluetoothctl <<'EOF'
# power on
# agent on
# default-agent
# scan on
# EOF

# # TODO: FIND MAC address
# bluetoothctl
# # in the interactive shell:
# pair AA:BB:CC:DD:EE:FF
# trust AA:BB:CC:DD:EE:FF
# connect AA:BB:CC:DD:EE:FF
# quit


# bluetoothctl <<EOF
# pairable on
# scan off
# discoverable off
# EOF


# #### TODO REAL VIP/UID
# cat <<'EOF' > /etc/tmpfiles.d/dev-show.conf
# d /dev/show 0755 root root -
# EOF

# systemd-tmpfiles --create


# cat >/etc/udev/rules.d/70-show-hid.rules <<EOF
# # USB actors (same VID/PID, distinguished by physical port)
# SUBSYSTEM=="hidraw", KERNEL=="hidraw*", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", KERNELS=="1-3", GROUP="show", MODE="0660", SYMLINK+="show/actor1"
# SUBSYSTEM=="hidraw", KERNEL=="hidraw*", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", KERNELS=="1-4", GROUP="show", MODE="0660", SYMLINK+="show/actor2"
# # Bluetooth device distinguished by uniq (MAC)
# SUBSYSTEM=="hidraw", KERNEL=="hidraw*", ENV{ID_BUS}=="bluetooth", ATTRS{uniq}=="AA:BB:CC:DD:EE:FF", GROUP="show", MODE="0660", SYMLINK+="show/bt-panic"
# # Fallback USB panic (VID/PID only) â€“ consider adding a port match too if multiple exist
# SUBSYSTEM=="hidraw", KERNEL=="hidraw*", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", GROUP="show", MODE="0660", SYMLINK+="show/usb-panic"
# EOF

# cat > /etc/udev/rules.d/75-show-input-ignore.rules <<'EOF'
# # For the keyboard-emulating HID(s): prevent desktop uaccess ACLs, restrict permissions,
# # and also tell libinput to ignore (Wayland/X won't treat it as a keyboard).
# SUBSYSTEM=="input", KERNEL=="event*", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", GROUP="show", MODE="0660", TAG-="uaccess", TAG-="seat", ENV{LIBINPUT_IGNORE_DEVICE}="1"
# #TODO OTHER 3 inputs
# EOF

# udevadm control --reload-rules
# udevadm trigger

# ls -l /dev/show/
